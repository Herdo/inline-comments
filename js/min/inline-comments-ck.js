!function(t,n,o){var i,e="incom_wrapper",a="#"+e,c="body",r="comments-and-form",s="#"+r,u="data-incom",f=u+"-comment",l="incom-active",d="."+l,v="incom-position-",p="incom-bubble",m="."+p,h=p+"-style",b=p+"-static",g=p+"-active",w=p+"-link",k="incom-comments-wrapper",C="."+k,T="incom-cancel",S="."+T,y=s+" .comment",x="data_incom",B=100;t.init=function(t){D(t),N()};var D=function(t){i=n.extend({selectors:"p",moveSiteSelector:c,countStatic:!0,defaultBubbleText:"+",position:"left",background:"white"},t)},N=function(){0===n(a).length&&n('<div id="'+e+'"></div>').appendTo(n(c)).addClass(v+i.position),O()},O=function(){var t=nn(i.selectors);n(t).each(function(o){n(t[o]).each(function(t){var o=n(this);W(t,o),_(o)})})},W=function(t,n){var o=n.prop("tagName").substr(0,1);if(!n.attr(u)){var i=o+t;n.attr(u,i)}},_=function(t){var o=j(t),i=I(t),e=n("<a/>",{href:"","class":w}).text(o).wrap(i).parent().appendTo(a);z(e),P(t,e),E(t,e),F(t,e)},j=function(t){var n;return n=q(t)?A(t):i.defaultBubbleText},A=function(t){var o=t.attr(u),i="["+f+"="+o+"]",e=n(i).length;return e},I=function(t){var n='<div class="'+Q(t)+'" />';return n},Q=function(t){var n=p,o=" ";return q(t)&&i.countStatic?n+=o+h+o+b:q(t)&&(n+=o+h),n},q=function(t){var o=A(t);return n.isNumeric(o)&&o>0?!0:!1},z=function(t){t.hasClass(b)&&t.css("display","block")},E=function(t,n){n.hasClass(b)||t.add(n).hover(function(){n.stop(!0,!0).fadeIn()},function(){n.stop(!0,!0).fadeOut(2e3)})},F=function(t,n){n.on("click",function(o){o.preventDefault(),G(),t.addClass(l),V(),n.addClass(g),H(n)})},G=function(){var t=n(d);0!==t.length&&(t.removeClass(l),0===t.prop("class").length&&t.removeAttr("class"))},H=function(t){var o=n("<div/>",{"class":k}).appendTo(a).css("background-color",i.background);L(),J(),P(t,o),X("in"),R(),U()},J=function(){n(s).appendTo(C).show(),K()},K=function(){var t=n("<input>").attr("type","hidden").attr("name",x).val(M);n(s+" .form-submit").append(n(t))},L=function(){var t="["+f+"="+M()+"]";n(y).hide(),n(y+t).show()},M=function(){var t=n(d).attr(u);return t},P=function(t,n){var o=t.offset();n.css({top:o.top,left:tn()?o.left+t.outerWidth():o.left-n.outerWidth()})},R=function(){n("html").click(function(t){0===n(t.target).parents(a).length&&V(!0)})},U=function(){n(S).click(function(t){t.preventDefault(),V(!0)})},V=function(t){var o=n(m),i=n(C);n(s).appendTo(a).hide(),o.hasClass(g)&&(o.removeClass(g),t?i.fadeOut("fast",function(){n(this).remove()}):i.remove(),X("out"))},X=function(t){var o=n(i.moveSiteSelector);o.css({position:"relative"}),Y(o,t),$(t,m),$(t,C)},Y=function(t,n){var o;"in"===n?o=B:"out"===n&&(o="initial"),Z(t,o)},Z=function(t,n){t.css(tn()?{right:n}:{left:n})},$=function(t,o){var i=n(o);"in"===t?i.css({left:tn()?"-="+B:"+="+B}):"out"===t&&i.css({left:tn()?"+="+B:"-="+B})},tn=function(){return"right"===i.position?!0:!1},nn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);
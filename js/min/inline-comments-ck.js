!function(t,n,o){var a,i="incom_wrapper",e="#"+i,c="comments-and-form",r="#"+c,s="data-incom",u=s+"-comment",f="incom-active",l="."+f,d="incom-position-",p="incom-bubble",v="."+p,m=p+"-style",h=p+"-static",b=p+"-active",g=p+"-link",w="incom-comments-wrapper",k="."+w,C="incom-cancel",T="."+C,y=r+" .comment",x="data_incom";t.init=function(t){B(t),D()};var B=function(t){a=n.extend({selectors:"p",countStatic:!0,defaultBubbleText:"+",position:"left",background:"white"},t)},D=function(){0===n(e).length&&n('<div id="'+i+'"></div>').appendTo(n("body")).addClass(d+a.position),N()},N=function(){var t=U(a.selectors);n(t).each(function(o){n(t[o]).each(function(t){var o=n(this);O(t,o),S(o)})})},O=function(t,n){var o=n.prop("tagName").substr(0,1);if(!n.attr(s)){var a=o+t;n.attr(s,a)}},S=function(t){var o=W(t),a=j(t),i=n("<a/>",{href:"","class":g}).text(o).wrap(a).parent().appendTo(e);Q(i),L(t,i),q(t,i),z(t,i)},W=function(t){var n;return n=I(t)?_(t):a.defaultBubbleText},_=function(t){var o=t.attr(s),a="["+u+"="+o+"]",i=n(a).length;return i},j=function(t){var n='<div class="'+A(t)+'" />';return n},A=function(t){var n=p,o=" ";return I(t)&&a.countStatic?n+=o+m+o+h:I(t)&&(n+=o+m),n},I=function(t){var o=_(t);return n.isNumeric(o)&&o>0?!0:!1},Q=function(t){t.hasClass(h)&&t.css("display","block")},q=function(t,n){n.hasClass(h)||t.add(n).hover(function(){n.stop(!0,!0).fadeIn()},function(){n.stop(!0,!0).fadeOut(2e3)})},z=function(t,n){n.on("click",function(o){o.preventDefault(),E(),t.addClass(f),R(),n.addClass(b),F(n)})},E=function(){var t=n(l);0!==t.length&&(t.removeClass(f),0===t.prop("class").length&&t.removeAttr("class"))},F=function(t){var o=n("<div/>",{"class":w}).appendTo(e).css("background-color",a.background);J(),G(),L(t,o),M(),P()},G=function(){n(r).appendTo(k).show(),H()},H=function(){var t=n("<input>").attr("type","hidden").attr("name",x).val(K);n(r+" .form-submit").append(n(t))},J=function(){var t="["+u+"="+K()+"]";n(y).hide(),n(y+t).show()},K=function(){var t=n(l).attr(s);return t},L=function(t,n){var o=t.offset();n.css({top:o.top,left:"right"===a.position?o.left+t.outerWidth():o.left-n.outerWidth()})},M=function(){n("html").click(function(t){0===n(t.target).parents(e).length&&R(!0)})},P=function(){n(T).click(function(t){t.preventDefault(),R(!0)})},R=function(t){var o=n(v),a=n(k);n(r).appendTo(e).hide(),o.hasClass(b)&&(o.removeClass(b),t?a.fadeOut("fast",function(){n(this).remove()}):a.remove())},U=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);
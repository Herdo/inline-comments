!function(n,t,o){var e,a="incom_wrapper",i="#"+a,c="comments-and-form",r="#"+c,s="data-incom",u="incom-active",f="."+u,d="incom-bubble",p="."+d,l="incom-bubble-active",v="incom-bubble-link",m="incom-comments-wrapper",h="."+m,b="incom-cancel",g="."+b;n.init=function(n){w(n),k()};var w=function(n){e=t.extend({selectors:"p",position:"left",background:"white"},n)},k=function(){0===t(i).length&&t('<div id="'+a+'"></div>').appendTo(t("body")),C()},C=function(){var n=q(e.selectors);t(n).each(function(o){t(n[o]).each(function(n){var o=t(this);T(n,o),y(o)})})},T=function(n,t){var o=t.prop("tagName").substr(0,1);if(!t.attr(s)){var e=o+n;t.attr(s,e)}},y=function(n){var o=t("<a/>",{href:"","class":v}).text("+").wrap('<div class="'+d+'" />').parent().appendTo(i);A(n,o),x(n,o),D(n,o)},x=function(n,t){n.add(t).hover(function(){t.stop(!0,!0).fadeIn()},function(){t.stop(!0,!0).fadeOut(2e3)})},D=function(n,t){t.on("click",function(o){o.preventDefault(),O(),n.addClass(u),Q(),t.addClass(l),W(t)})},O=function(){var n=t(f);0!==n.length&&(n.removeClass(u),0===n.prop("class").length&&n.removeAttr("class"))},W=function(n){var o=t("<div/>",{"class":m}).appendTo(i).css("background-color",e.background);_(),A(n,o),I(),N()},_=function(){t(r).appendTo(h).show();var n=t("<input>").attr("type","hidden").attr("name","data_incom").val(j);t(r+" .form-submit").append(t(n))},j=function(){var n=t(f).attr(s);return n},A=function(n,t){var o=n.offset();t.css({top:o.top,left:"right"===e.position?o.left+n.outerWidth():o.left-t.outerWidth()})},I=function(){t("html").click(function(n){0===t(n.target).parents(i).length&&Q(!0)})},N=function(){t(g).click(function(n){n.preventDefault(),Q(!0)})},Q=function(n){var o=t(p),e=t(h);t(r).appendTo(i).hide(),o.hasClass(l)&&(o.removeClass(l),n===!0?e.fadeOut("fast",function(){t(this).remove()}):e.remove())},q=function(n){var t=n.split(",");return t}}(window.incom=window.incom||{},jQuery);
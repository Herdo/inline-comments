!function(t,n,i){var o,e="incom_wrapper",a="#"+e,c="html",u="comments-and-form",r="#"+u,s="data-incom",f=s+"-comment",l="incom-active",d="."+l,v="incom-position-",p="incom-bubble",b="."+p,m=p+"-style",h=p+"-static",w=p+"-dynamic",g=p+"-active",y=p+"-link",S="incom-comments-wrapper",k="."+S,C="incom-cancel",T="."+C,A="incom-info-icon",x="."+A,O=r+" .comment",I="data_incom",W=0,B=n(window).width(),D,N,_;t.init=function(t){j(t),Q(),pn()};var j=function(t){o=n.extend({selectors:"p",moveSiteSelector:c,countStatic:!0,defaultBubbleText:"+",bubbleStyle:"bubble",bubbleAnimationIn:"default",bubbleAnimationOut:"default",position:"left",background:"white"},t)},Q=function(){0===n(a).length&&n('<div id="'+e+'"></div>').appendTo(n(c)).addClass(v+o.position),q()},q=function(){var t=bn(o.selectors);n(t).each(function(i){n(t[i]).each(function(t){var i=n(this);z(t,i),E(i)})})},z=function(t,n){var i=n.prop("tagName").substr(0,1);if(!n.attr(s)){var o=i+t;n.attr(s,o)}},E=function(t){var i=F(t),o=H(t),e=n("<a/>",{href:"","class":y}).text(i).wrap(o).parent().appendTo(a);L(e),$(t,e),nn(e)?(M(t,e),P(t,e)):e.hide()},F=function(t){var n;return n=K(t)?G(t):o.defaultBubbleText},G=function(t){var i=t.attr(s),o="["+f+"="+i+"]",e=n(o).length;return e},H=function(t){var n='<div class="'+J(t)+'" />';return n},J=function(t){var n=p,i=" ";return n+=K(t)&&o.countStatic?i+m+i+h:K(t)||!K(t)&&"bubble"===o.bubbleStyle?i+m:i+w},K=function(t){var i=G(t);return n.isNumeric(i)&&i>0?!0:!1},L=function(t){t.hasClass(h)&&t.css("display","block")},M=function(t,n){n.hasClass(h)||t.add(n).hover(function(){"fadein"===o.bubbleAnimationIn?n.stop(!0,!0).fadeIn():n.stop(!0,!0).show(),nn(n)||n.hide()},function(){"fadeout"===o.bubbleAnimationOut?n.stop(!0,!0).fadeOut():n.stop(!0,!0).delay(500).hide(0)})},P=function(t,n){n.on("click",function(i){i.preventDefault(),R(),t.addClass(l),rn(),n.addClass(g),U(n)})},R=function(){var t=n(d);0!==t.length&&(t.removeClass(l),0===t.prop("class").length&&t.removeAttr("class"))},U=function(t){var i=n("<div/>",{"class":S}).appendTo(a).css("background-color",o.background);Y(),V(),$(t,i),on(i),cn(),un()},V=function(){n(r).appendTo(k).show(),X()},X=function(){var t=n("<input>").attr("type","hidden").attr("name",I).val(Z);n(r+" .form-submit").append(n(t))},Y=function(){var t="["+f+"="+Z()+"]";n(O).hide(),n(O+t).show()},Z=function(){var t=n(d).attr(s);return t},$=function(t,n){var i=t.offset();n.css({top:i.top,left:vn()?i.left+t.outerWidth():i.left-n.outerWidth()})},tn=function(t){D=t.outerWidth(),N=t.offset().left,_=N+D},nn=function(t){return tn(t),_>B||0>N?!1:!0},on=function(t){tn(t),vn()&&_>B?(en(_-B),sn("in")):!vn()&&0>N&&(en(-N),sn("in"))},en=function(t){W=t},an=function(){return W},cn=function(){n("html").click(function(t){0===n(t.target).parents(a).length&&rn(!0)})},un=function(){n(T).click(function(t){t.preventDefault(),rn(!0)})},rn=function(t){var i=n(b),o=n(k);n(r).appendTo(a).hide(),i.hasClass(g)&&(i.removeClass(g),t?o.fadeOut("fast",function(){n(this).remove(),R()}):o.remove(),sn("out"))},sn=function(t){var i=n(o.moveSiteSelector);i.css({position:"relative"}),fn(i,t),o.moveSiteSelector!==c&&(dn(t,b),dn(t,k))},fn=function(t,n){var i;"in"===n?i=an():"out"===n&&(i="initial"),ln(t,i)},ln=function(t,n){t.css(vn()?{right:n}:{left:n})},dn=function(t,i){var o=n(i);"in"===t?o.css({left:vn()?"-="+an():"+="+an()}):"out"===t&&o.css({left:vn()?"+="+an():"-="+an()})},vn=function(){return"right"===o.position?!0:!1},pn=function(){n(x).css({display:"block",visibility:"visible"})},bn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);
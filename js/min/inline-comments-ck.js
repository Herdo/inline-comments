!function(t,n,o){var i,e="incom_wrapper",c="#"+e,a="html",r="comments-and-form",u="#"+r,s="data-incom",f=s+"-comment",l="incom-active",d="."+l,v="incom-position-",p="incom-bubble",m="."+p,h=p+"-style",b=p+"-static",w=p+"-active",g=p+"-link",k="incom-comments-wrapper",C="."+k,S="incom-cancel",T="."+S,x=u+" .comment",y="data_incom",W=0;t.init=function(t){B(t),D()};var B=function(t){i=n.extend({selectors:"p",moveSiteSelector:a,countStatic:!0,defaultBubbleText:"+",position:"left",background:"white"},t)},D=function(){0===n(c).length&&n('<div id="'+e+'"></div>').appendTo(n(a)).addClass(v+i.position),N()},N=function(){var t=cn(i.selectors);n(t).each(function(o){n(t[o]).each(function(t){var o=n(this);O(t,o),_(o)})})},O=function(t,n){var o=n.prop("tagName").substr(0,1);if(!n.attr(s)){var i=o+t;n.attr(s,i)}},_=function(t){var o=j(t),i=I(t),e=n("<a/>",{href:"","class":g}).text(o).wrap(i).parent().appendTo(c);z(e),P(t,e),E(t,e),F(t,e)},j=function(t){var n;return n=q(t)?A(t):i.defaultBubbleText},A=function(t){var o=t.attr(s),i="["+f+"="+o+"]",e=n(i).length;return e},I=function(t){var n='<div class="'+Q(t)+'" />';return n},Q=function(t){var n=p,o=" ";return q(t)&&i.countStatic?n+=o+h+o+b:q(t)&&(n+=o+h),n},q=function(t){var o=A(t);return n.isNumeric(o)&&o>0?!0:!1},z=function(t){t.hasClass(b)&&t.css("display","block")},E=function(t,n){n.hasClass(b)||t.add(n).hover(function(){n.stop(!0,!0).fadeIn()},function(){n.stop(!0,!0).fadeOut(2e3)})},F=function(t,n){n.on("click",function(o){o.preventDefault(),G(),t.addClass(l),Z(),n.addClass(w),H(n)})},G=function(){var t=n(d);0!==t.length&&(t.removeClass(l),0===t.prop("class").length&&t.removeAttr("class"))},H=function(t){var o=n("<div/>",{"class":k}).appendTo(c).css("background-color",i.background);L(),J(),P(t,o),R(o),X(),Y()},J=function(){n(u).appendTo(C).show(),K()},K=function(){var t=n("<input>").attr("type","hidden").attr("name",y).val(M);n(u+" .form-submit").append(n(t))},L=function(){var t="["+f+"="+M()+"]";n(x).hide(),n(x+t).show()},M=function(){var t=n(d).attr(s);return t},P=function(t,n){var o=t.offset();n.css({top:o.top,left:en()?o.left+t.outerWidth():o.left-n.outerWidth()})},R=function(t){var o=n(window).width(),i=t.outerWidth(),e=t.offset().left,c=e+i;en()&&c>o?(U(c-o),$("in")):!en()&&0>e&&(U(-e),$("in"))},U=function(t){W=t},V=function(){return W},X=function(){n("html").click(function(t){0===n(t.target).parents(c).length&&Z(!0)})},Y=function(){n(T).click(function(t){t.preventDefault(),Z(!0)})},Z=function(t){var o=n(m),i=n(C);n(u).appendTo(c).hide(),o.hasClass(w)&&(o.removeClass(w),t?i.fadeOut("fast",function(){n(this).remove()}):i.remove(),$("out"))},$=function(t){var o=n(i.moveSiteSelector);o.css({position:"relative"}),tn(o,t),i.moveSiteSelector!==a&&(on(t,m),on(t,C))},tn=function(t,n){var o;"in"===n?o=V():"out"===n&&(o="initial"),nn(t,o)},nn=function(t,n){t.css(en()?{right:n}:{left:n})},on=function(t,o){var i=n(o);"in"===t?i.css({left:en()?"-="+V():"+="+V()}):"out"===t&&i.css({left:en()?"+="+V():"-="+V()})},en=function(){return"right"===i.position?!0:!1},cn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);
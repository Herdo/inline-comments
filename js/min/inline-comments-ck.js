!function(t,$,n){var i,e="incom_wrapper",o="#"+e,a="html",c="comments-and-form",r="#"+c,u="data-incom",s=u+"-comment",f="incom-active",l="."+f,d="incom-visible-comment",v="."+d,b="incom-position-",p="incom-bubble",m="."+p,h=p+"-style",g=p+"-static",w="."+g,y=p+"-dynamic",S=p+"-active",C=p+"-link",k="incom-comments-wrapper",T="."+k,A="incom-cancel",I="."+A,x="incom-info-icon",O="."+x,W=r+" .comment",B="data_incom",D=0,N=$(window).width(),_,j,Q;t.init=function(t){q(t),z(),wn()};var q=function(t){i=$.extend({selectors:"p",moveSiteSelector:a,countStatic:!0,alwaysStatic:!1,defaultBubbleText:"+",bubbleStyle:"bubble",bubbleAnimationIn:"default",bubbleAnimationOut:"default",position:"left",background:"white"},t)},z=function(){0===$(o).length&&$('<div id="'+e+'"></div>').appendTo($(a)).addClass(b+i.position),E()},E=function(){var t=yn(i.selectors);$(t).each(function(n){$(t[n]).each(function(t){var n=$(this);F(t,n),G(n)})})},F=function(t,n){var i=n.prop("tagName").substr(0,1);if(!n.attr(u)){var e=i+t;n.attr(u,e)}},G=function(t){var n=H(t),i=K(t),e=$("<a/>",{href:"","class":C}).text(n).wrap(i).parent().appendTo(o);P(e),an(t,e),rn(e)?(R(t,e),U(t,e)):e.hide()},H=function(t){var n;return n=M(t)?J(t):i.defaultBubbleText},J=function(t){var n=t.attr(u),i="["+s+"="+n+"]",e=$(i).length;return e},K=function(t){var n='<div class="'+L(t)+'" />';return n},L=function(t){var n=p,e=" ";return(i.alwaysStatic||M(t)&&i.countStatic)&&(n+=e+g),n+=M(t)||!M(t)&&"bubble"===i.bubbleStyle?e+h:e+y},M=function(t){var n=J(t);return $.isNumeric(n)&&n>0?!0:!1},P=function(t){t.hasClass(g)&&t.css("display","block")},R=function(t,n){n.hasClass(g)||t.add(n).hover(function(){$(m+":not("+w+")").hide(),"fadein"===i.bubbleAnimationIn?n.stop(!0,!0).fadeIn():n.stop(!0,!0).show(),rn(n)||n.hide()},function(){"fadeout"===i.bubbleAnimationOut?n.stop(!0,!0).fadeOut():n.stop(!0,!0).delay(700).hide(0)})},U=function(t,n){n.on("click",function(i){i.preventDefault(),V(),t.addClass(f),vn(),n.addClass(S),Z(n)})},V=function(){var t=$(l);0!==t.length&&(t.removeClass(f),0===t.prop("class").length&&t.removeAttr("class"))},X=function(t){var n=parseInt(Y(t).substring(0,2),16),i=parseInt(Y(t).substring(2,4),16),e=parseInt(Y(t).substring(4,6),16);return n+","+i+","+e},Y=function(t){return"#"===t.charAt(0)?t.substring(1,7):t},Z=function(t){var n=$("<div/>",{"class":k}).appendTo(o).css("background-color","rgba("+X(i.background)+",1)");en(),tn(),an(t,n),un(n),ln(),dn()},tn=function(){$(r).appendTo(T).show(),nn()},nn=function(){var t=$("<input>").attr("type","hidden").attr("name",B).val(on);$(r+" .form-submit").append($(t))},en=function(){var t="["+s+"="+on()+"]";$(W).hide(),$(W+t).addClass(d).show()},on=function(){var t=$(l).attr(u);return t},an=function(t,n){var i=t.offset();n.css({top:i.top,left:gn()?i.left+t.outerWidth():i.left-n.outerWidth()})},cn=function(t){_=t.outerWidth(),j=t.offset().left,Q=j+_},rn=function(t){return cn(t),Q>N||0>j?!1:!0},un=function(t){cn(t),gn()&&Q>N?(sn(Q-N),bn("in")):!gn()&&0>j&&(sn(-j),bn("in"))},sn=function(t){D=t},fn=function(){return D},ln=function(){$("html").click(function(t){0===$(t.target).parents(o).length&&vn(!0)})},dn=function(){$(I).click(function(t){t.preventDefault(),vn(!0)})},vn=function(t){var n=$(m),i=$(T);$(r).appendTo(o).hide(),$(v).removeClass(d),n.hasClass(S)&&(n.removeClass(S),t?i.fadeOut("fast",function(){$(this).remove(),V()}):i.remove(),bn("out"))},bn=function(t){var n=$(i.moveSiteSelector);n.css({position:"relative"}),pn(n,t),i.moveSiteSelector!==a&&(hn(t,m),hn(t,T))},pn=function(t,n){var i;"in"===n?i=fn():"out"===n&&(i="initial"),mn(t,i)},mn=function(t,n){t.css(gn()?{right:n}:{left:n})},hn=function(t,n){var i=$(n);"in"===t?i.css({left:gn()?"-="+fn():"+="+fn()}):"out"===t&&i.css({left:gn()?"+="+fn():"-="+fn()})},gn=function(){return"right"===i.position?!0:!1},wn=function(){$(O).css({display:"block",visibility:"visible"})},yn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);
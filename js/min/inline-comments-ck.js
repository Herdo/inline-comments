!function(n,t,o){var a,e="incom_wrapper",i="#"+e,c="comments-and-form",r="#"+c,u="data-incom",s=u+"-comment",f="incom-active",l="."+f,d="incom-bubble",p="."+d,v=d+"-style",m=d+"-static",h=d+"-active",b=d+"-link",g="incom-comments-wrapper",w="."+g,k="incom-cancel",y="."+k,C=r+" .comment",T="data_incom";n.init=function(n){x(n),D()};var x=function(n){a=t.extend({selectors:"p",countDisplay:!0,countStatic:!0,defaultBubbleText:"+",position:"left",background:"white"},n)},D=function(){0===t(i).length&&t('<div id="'+e+'"></div>').appendTo(t("body")),B()},B=function(){var n=R(a.selectors);t(n).each(function(o){t(n[o]).each(function(n){var o=t(this);N(n,o),O(o)})})},N=function(n,t){var o=t.prop("tagName").substr(0,1);if(!t.attr(u)){var a=o+n;t.attr(u,a)}},O=function(n){var o=W(n),a=j(n),e=t("<a/>",{href:"","class":b}).text(o).wrap(a).parent().appendTo(i);Q(e),K(n,e),S(n,e),q(n,e)},W=function(n){var t;return t=I(n)===!0?_(n):a.defaultBubbleText},_=function(n){var o=n.attr(u),a="["+s+"="+o+"]",e=t(a).length;return e},j=function(n){var t='<div class="'+A(n)+'" />';return t},A=function(n){var t=d;return(I(n)&&a.countDisplay)===!0?t=d+" "+v+" "+m:I(n)===!0&&(t=d+" "+v),t},I=function(n){var o=_(n);return t.isNumeric(o)&&o>0?!0:!1},Q=function(n){n.hasClass(m)&&n.css("display","block")},S=function(n,t){t.hasClass(m)||n.add(t).hover(function(){t.stop(!0,!0).fadeIn()},function(){t.stop(!0,!0).fadeOut(2e3)})},q=function(n,t){t.on("click",function(o){o.preventDefault(),z(),n.addClass(f),P(),t.addClass(h),E(t)})},z=function(){var n=t(l);0!==n.length&&(n.removeClass(f),0===n.prop("class").length&&n.removeAttr("class"))},E=function(n){var o=t("<div/>",{"class":g}).appendTo(i).css("background-color",a.background);H(),F(),K(n,o),L(),M()},F=function(){t(r).appendTo(w).show(),G()},G=function(){var n=t("<input>").attr("type","hidden").attr("name",T).val(J);t(r+" .form-submit").append(t(n))},H=function(){var n="["+s+"="+J()+"]";t(C).hide(),t(C+n).show()},J=function(){var n=t(l).attr(u);return n},K=function(n,t){var o=n.offset();t.css({top:o.top,left:"right"===a.position?o.left+n.outerWidth():o.left-t.outerWidth()})},L=function(){t("html").click(function(n){0===t(n.target).parents(i).length&&P(!0)})},M=function(){t(y).click(function(n){n.preventDefault(),P(!0)})},P=function(n){var o=t(p),a=t(w);t(r).appendTo(i).hide(),o.hasClass(h)&&(o.removeClass(h),n===!0?a.fadeOut("fast",function(){t(this).remove()}):a.remove())},R=function(n){var t=n.split(",");return t}}(window.incom=window.incom||{},jQuery);
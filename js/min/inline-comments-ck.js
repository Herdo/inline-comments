!function(t,n,o){var i,e="incom_wrapper",c="#"+e,a="comments-and-form",r="#"+a,s="data-incom",u=s+"-comment",f="incom-active",l="."+f,p="incom-position-",v="incom-bubble",d="."+v,m=v+"-style",h=v+"-static",b=v+"-active",g=v+"-link",w="incom-comments-wrapper",k="."+w,C="incom-cancel",T="."+C,y=r+" .comment",S="data_incom",x=100;t.init=function(t){B(t),D()};var B=function(t){i=n.extend({selectors:"p",countStatic:!0,defaultBubbleText:"+",position:"left",background:"white",moveSiteSelector:"body"},t)},D=function(){0===n(c).length&&n('<div id="'+e+'"></div>').appendTo(n("body")).addClass(p+i.position),N()},N=function(){var t=tn(i.selectors);n(t).each(function(o){n(t[o]).each(function(t){var o=n(this);O(t,o),W(o)})})},O=function(t,n){var o=n.prop("tagName").substr(0,1);if(!n.attr(s)){var i=o+t;n.attr(s,i)}},W=function(t){var o=_(t),i=A(t),e=n("<a/>",{href:"","class":g}).text(o).wrap(i).parent().appendTo(c);q(e),M(t,e),z(t,e),E(t,e)},_=function(t){var n;return n=Q(t)?j(t):i.defaultBubbleText},j=function(t){var o=t.attr(s),i="["+u+"="+o+"]",e=n(i).length;return e},A=function(t){var n='<div class="'+I(t)+'" />';return n},I=function(t){var n=v,o=" ";return Q(t)&&i.countStatic?n+=o+m+o+h:Q(t)&&(n+=o+m),n},Q=function(t){var o=j(t);return n.isNumeric(o)&&o>0?!0:!1},q=function(t){t.hasClass(h)&&t.css("display","block")},z=function(t,n){n.hasClass(h)||t.add(n).hover(function(){n.stop(!0,!0).fadeIn()},function(){n.stop(!0,!0).fadeOut(2e3)})},E=function(t,n){n.on("click",function(o){o.preventDefault(),F(),t.addClass(f),U(),n.addClass(b),G(n)})},F=function(){var t=n(l);0!==t.length&&(t.removeClass(f),0===t.prop("class").length&&t.removeAttr("class"))},G=function(t){var o=n("<div/>",{"class":w}).appendTo(c).css("background-color",i.background);K(),H(),M(t,o),V("in"),P(),R()},H=function(){n(r).appendTo(k).show(),J()},J=function(){var t=n("<input>").attr("type","hidden").attr("name",S).val(L);n(r+" .form-submit").append(n(t))},K=function(){var t="["+u+"="+L()+"]";n(y).hide(),n(y+t).show()},L=function(){var t=n(l).attr(s);return t},M=function(t,n){var o=t.offset();n.css({top:o.top,left:"right"===i.position?o.left+t.outerWidth():o.left-n.outerWidth()})},P=function(){n("html").click(function(t){0===n(t.target).parents(c).length&&U(!0)})},R=function(){n(T).click(function(t){t.preventDefault(),U(!0)})},U=function(t){var o=n(d),i=n(k);n(r).appendTo(c).hide(),o.hasClass(b)&&(o.removeClass(b),t?i.fadeOut("fast",function(){n(this).remove()}):i.remove(),V("out"))},V=function(t){var o=n(i.moveSiteSelector),e;o.css({position:"relative"}),"in"===t?(X(),Z(),e=x,o.css("left"===i.position?{left:e}:{right:e})):"out"===t&&(Y(),$(),e="initial",o.css("left"===i.position?{left:e}:{right:e}))},X=function(){var t=n(".incom-bubble");t.css({left:"right"===i.position?"-="+x:"+="+x})},Y=function(){var t=n(".incom-bubble");t.css({left:"right"===i.position?"+="+x:"-="+x})},Z=function(){var t=n(".incom-comments-wrapper");t.css({left:"right"===i.position?"-="+x:"+="+x})},$=function(){var t=n(".incom-comments-wrapper");t.css({left:"right"===i.position?"+="+x:"-="+x})},tn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);
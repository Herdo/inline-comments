!function(n,$,t){var i,o="incom_wrapper",e="#"+o,c="body",a="comments-and-form",r="#"+a,u="incom-commentform",s="data-incom",l=s+"-comment",f=[],d="incom-active",m="."+d,p="incom-visible-comment",b="."+p,v="incom-position-",h="incom-bubble",g="."+h,y=h+"-style",w=h+"-static",k="."+w,S=h+"-dynamic",C=h+"-active",A=h+"-link",T="incom-comments-wrapper",x="."+T,I="incom-reply",O="."+I,W="incom-cancel",j="."+W,B="incom-info-icon",D="."+B,N=r+" .comment",_="data_incom",L=0,Q=$(window).width(),q,z,E;n.init=function(n){F(n),G(),Tt(),$(O+" .comment-reply-link").on("click",function(){$(r+" #commentform").attr("id",u)})};var F=function(n){i=$.extend({selectors:"p",moveSiteSelector:c,countStatic:!0,alwaysStatic:!1,defaultBubbleText:"+",bubbleStyle:"bubble",bubbleAnimationIn:"default",bubbleAnimationOut:"default",position:"left",background:"white",backgroundOpacity:"1"},n)},G=function(){0===$(e).length&&$('<div id="'+o+'"></div>').appendTo($(c)).addClass(v+i.position),H()},H=function(){var n=xt(i.selectors);$(n).each(function(t){$(n[t]).each(function(n){var t=$(this),i=J(t);n=K(n,i),M(n,t,i),P(t)})})},J=function(n){var t=n.prop("tagName").substr(0,5);return t},K=function(n,t){var i=t+n;if(-1!==$.inArray(i,f))for(;-1!==$.inArray(i,f);)n++,i=t+n;return f.push(i),n},M=function(n,t,i){if(!t.attr(s)){var o=i+n;t.attr(s,o)}},P=function(n){var t=R(n),i=V(n),o=$("<a/>",{href:"","class":A}).text(t).wrap(i).parent().appendTo(e);Z(o),ft(n,o),mt(o)?(nt(n,o),tt(n,o)):o.hide()},R=function(n){var t;return t=Y(n)?U(n):i.defaultBubbleText},U=function(n){var t=n.attr(s),i="["+l+"="+t+"]",o=$(i).length;return o+=$(i+" .children li").length},V=function(n){var t='<div class="'+X(n)+'" />';return t},X=function(n){var t=h,o=" ";return(i.alwaysStatic||Y(n)&&i.countStatic)&&(t+=o+w),t+=Y(n)||!Y(n)&&"bubble"===i.bubbleStyle?o+y:o+S},Y=function(n){var t=U(n);return $.isNumeric(t)&&t>0?!0:!1},Z=function(n){n.hasClass(w)&&n.css("display","block")},nt=function(n,t){t.hasClass(w)||n.add(t).hover(function(){$(g+":not("+k+")").hide(),"fadein"===i.bubbleAnimationIn?t.stop(!0,!0).fadeIn():t.stop(!0,!0).show(),mt(t)||t.hide()},function(){"fadeout"===i.bubbleAnimationOut?t.stop(!0,!0).fadeOut():t.stop(!0,!0).delay(700).hide(0)})},tt=function(n,t){t.on("click",function(i){i.preventDefault(),it(),n.addClass(d),yt(),t.addClass(C),ct(t)})},it=function(){var n=$(m);0!==n.length&&(n.removeClass(d),0===n.prop("class").length&&n.removeAttr("class"))},ot=function(n){var t=parseInt(et(n).substring(0,2),16),i=parseInt(et(n).substring(2,4),16),o=parseInt(et(n).substring(4,6),16);return t+","+i+","+o},et=function(n){return"#"===n.charAt(0)?n.substring(1,7):n},ct=function(n){var t=$("<div/>",{"class":T}).appendTo(e).css("background-color","rgba("+ot(i.background)+","+i.backgroundOpacity+")");st(),rt(),ft(n,t),pt(t),ht(),at()},at=function(){$(document).ready(gt()).ajaxStop(function(){gt()})},rt=function(){$(r).appendTo(x).show(),ut()},ut=function(){var n=$("<input>").attr("type","hidden").attr("name",_).val(lt);$(r+" .form-submit").append($(n))},st=function(){var n="["+l+"="+lt()+"]";$(N).hide(),$(N+n).addClass(p).show(),$(b+" .children li").show()},lt=function(){var n=$(m).attr(s);return n},ft=function(n,t){var i=n.offset();t.css({top:i.top,left:At()?i.left+n.outerWidth():i.left-t.outerWidth()})},dt=function(n){q=n.outerWidth(),z=n.offset().left,E=z+q},mt=function(n){return dt(n),E>Q||0>z?!1:!0},pt=function(n){dt(n),At()&&E>Q?(bt(E-Q),wt("in")):!At()&&0>z&&(bt(-z),wt("in"))},bt=function(n){L=n},vt=function(){return L},ht=function(){$("html").click(function(n){0===$(n.target).parents(e).length&&yt(!0)})},gt=function(){$(j).click(function(n){n.preventDefault(),yt(!0)})},yt=function(n){var t=$(g),i=$(x);$(r).appendTo(e).hide(),$(b).removeClass(p),t.hasClass(C)&&(t.removeClass(C),n?i.fadeOut("fast",function(){$(this).remove(),it()}):i.remove(),wt("out"))},wt=function(n){var t=$(i.moveSiteSelector);t.css({position:"relative"}),kt(t,n),i.moveSiteSelector!==c&&(Ct(n,g),Ct(n,x))},kt=function(n,t){var i;"in"===t?i=vt():"out"===t&&(i="initial"),St(n,i)},St=function(n,t){n.css(At()?{right:t}:{left:t})},Ct=function(n,t){var i=$(t);"in"===n?i.css({left:At()?"-="+vt():"+="+vt()}):"out"===n&&i.css({left:At()?"+="+vt():"-="+vt()})},At=function(){return"right"===i.position?!0:!1},Tt=function(){$(D).css({display:"block",visibility:"visible"});var n=$(D).css("color");n=n.replace(/\s/g,""),n=n.toLowerCase(),("rgb(255, 255, 255)"===n||"white"===n||"rgba(0,0,0,0)"===n)&&$(D).css("cssText","color: black!important;")},xt=function(n){var t=n.split(",");return t}}(window.incom=window.incom||{},jQuery);
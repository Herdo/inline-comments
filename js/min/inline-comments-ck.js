!function(n,t,o){var e,a="incom_wrapper",i="#"+a,c="comments-and-form",r="#"+c,u="data-incom",f=u+"-comment",s="incom-active",l="."+s,d="incom-bubble",p="."+d,v=d+"-static",m=d+"-active",h=d+"-link",b="incom-comments-wrapper",g="."+b,w="incom-cancel",k="."+w,T=r+" .comment",y="data_incom";n.init=function(n){C(n),D()};var C=function(n){e=t.extend({selectors:"p",countDisplay:!0,countStatic:!0,defaultBubbleText:"+",position:"left",background:"white"},n)},D=function(){0===t(i).length&&t('<div id="'+a+'"></div>').appendTo(t("body")),x()},x=function(){var n=M(e.selectors);t(n).each(function(o){t(n[o]).each(function(n){var o=t(this);B(n,o),N(o)})})},B=function(n,t){var o=t.prop("tagName").substr(0,1);if(!t.attr(u)){var e=o+n;t.attr(u,e)}},N=function(n){var o=O(n),e=_(n),a=t("<a/>",{href:"","class":h}).text(o).wrap(e).parent().appendTo(i);H(n,a),I(n,a),Q(n,a)},O=function(n){var t;return t=(A(n)&&e.countDisplay)===!0?W(n):e.defaultBubbleText},W=function(n){var o=n.attr(u),e="["+f+"="+o+"]",a=t(e).length;return a},_=function(n){var t='<div class="'+j(n)+'" />';return t},j=function(n){var t=d;return(A(n)&&e.countDisplay)===!0&&(t=d+" "+v),t},A=function(n){var o=W(n);return t.isNumeric(o)&&o>0?!0:!1},I=function(n,t){n.add(t).hover(function(){t.stop(!0,!0).fadeIn()},function(){t.stop(!0,!0).fadeOut(2e3)})},Q=function(n,t){t.on("click",function(o){o.preventDefault(),S(),n.addClass(s),L(),t.addClass(m),q(t)})},S=function(){var n=t(l);0!==n.length&&(n.removeClass(s),0===n.prop("class").length&&n.removeAttr("class"))},q=function(n){var o=t("<div/>",{"class":b}).appendTo(i).css("background-color",e.background);F(),z(),H(n,o),J(),K()},z=function(){t(r).appendTo(g).show(),E()},E=function(){var n=t("<input>").attr("type","hidden").attr("name",y).val(G);t(r+" .form-submit").append(t(n))},F=function(){var n="["+f+"="+G()+"]";t(T).hide(),t(T+n).show()},G=function(){var n=t(l).attr(u);return n},H=function(n,t){var o=n.offset();t.css({top:o.top,left:"right"===e.position?o.left+n.outerWidth():o.left-t.outerWidth()})},J=function(){t("html").click(function(n){0===t(n.target).parents(i).length&&L(!0)})},K=function(){t(k).click(function(n){n.preventDefault(),L(!0)})},L=function(n){var o=t(p),e=t(g);t(r).appendTo(i).hide(),o.hasClass(m)&&(o.removeClass(m),n===!0?e.fadeOut("fast",function(){t(this).remove()}):e.remove())},M=function(n){var t=n.split(",");return t}}(window.incom=window.incom||{},jQuery);
!function(t,n,i){var o,e="incom_wrapper",a="#"+e,c="comments-and-form",r="#"+c,s="data-incom",u=s+"-comment",f="incom-active",l="."+f,d="incom-position-",p="incom-bubble",v="."+p,m=p+"-style",h=p+"-static",b=p+"-active",g=p+"-link",w="incom-comments-wrapper",k="."+w,y="incom-cancel",C="."+y,T=r+" .comment",x="data_incom",B=100;t.init=function(t){D(t),N()};var D=function(t){o=n.extend({selectors:"p",countStatic:!0,defaultBubbleText:"+",position:"left",background:"white"},t)},N=function(){0===n(a).length&&n('<div id="'+e+'"></div>').appendTo(n("body")).addClass(d+o.position),O()},O=function(){var t=X(o.selectors);n(t).each(function(i){n(t[i]).each(function(t){var i=n(this);S(t,i),W(i)})})},S=function(t,n){var i=n.prop("tagName").substr(0,1);if(!n.attr(s)){var o=i+t;n.attr(s,o)}},W=function(t){var i=_(t),o=A(t),e=n("<a/>",{href:"","class":g}).text(i).wrap(o).parent().appendTo(a);q(e),M(t,e),z(t,e),E(t,e)},_=function(t){var n;return n=Q(t)?j(t):o.defaultBubbleText},j=function(t){var i=t.attr(s),o="["+u+"="+i+"]",e=n(o).length;return e},A=function(t){var n='<div class="'+I(t)+'" />';return n},I=function(t){var n=p,i=" ";return Q(t)&&o.countStatic?n+=i+m+i+h:Q(t)&&(n+=i+m),n},Q=function(t){var i=j(t);return n.isNumeric(i)&&i>0?!0:!1},q=function(t){t.hasClass(h)&&t.css("display","block")},z=function(t,n){n.hasClass(h)||t.add(n).hover(function(){n.stop(!0,!0).fadeIn()},function(){n.stop(!0,!0).fadeOut(2e3)})},E=function(t,n){n.on("click",function(i){i.preventDefault(),F(),t.addClass(f),U(),n.addClass(b),G(n)})},F=function(){var t=n(l);0!==t.length&&(t.removeClass(f),0===t.prop("class").length&&t.removeAttr("class"))},G=function(t){var i=n("<div/>",{"class":w}).appendTo(a).css("background-color",o.background);V("in"),K(),H(),M(t,i,B),P(),R()},H=function(){n(r).appendTo(k).show(),J()},J=function(){var t=n("<input>").attr("type","hidden").attr("name",x).val(L);n(r+" .form-submit").append(n(t))},K=function(){var t="["+u+"="+L()+"]";n(T).hide(),n(T+t).show()},L=function(){var t=n(l).attr(s);return t},M=function(t,n,i){var e=t.offset();i="undefined"!=typeof i?i:0,n.css({top:e.top,left:"right"===o.position?e.left+t.outerWidth()+i:e.left-n.outerWidth()-i})},P=function(){n("html").click(function(t){0===n(t.target).parents(a).length&&U(!0)})},R=function(){n(C).click(function(t){t.preventDefault(),U(!0)})},U=function(t){var i=n(v),o=n(k);n(r).appendTo(a).hide(),i.hasClass(b)&&(i.removeClass(b),t?o.fadeOut("fast",function(){n(this).remove()}):o.remove(),V("out"))},V=function(t){"in"===t?n("body").css("left"===o.position?{position:"relative",left:B}:{position:"relative",right:B}):"out"===t&&n("body").css("left"===o.position?{position:"relative",left:"initial"}:{position:"relative",right:"initial"})},X=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);
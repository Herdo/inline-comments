!function(n,t,o){var a,e="incom_wrapper",i="#"+e,c="comments-and-form",r="#"+c,u="data-incom",s="data-incom-comment",f="incom-active",d="."+f,l="incom-bubble",p="."+l,m="incom-bubble-active",v="incom-bubble-link",h="incom-comments-wrapper",b="."+h,g="incom-cancel",w="."+g,k="#comments-and-form .comment",C="data_incom",y="+";n.init=function(n){T(n),x()};var T=function(n){a=t.extend({selectors:"p",displayCount:!0,position:"left",background:"white"},n)},x=function(){0===t(i).length&&t('<div id="'+e+'"></div>').appendTo(t("body")),D()},D=function(){var n=K(a.selectors);t(n).each(function(o){t(n[o]).each(function(n){var o=t(this);N(n,o),O(o)})})},N=function(n,t){var o=t.prop("tagName").substr(0,1);if(!t.attr(u)){var a=o+n;t.attr(u,a)}},O=function(n){var o=W(n),a=t("<a/>",{href:"","class":v}).text(o).wrap('<div class="'+l+'" />').parent().appendTo(i);F(n,a),j(n,a),A(n,a)},W=function(n){var o,e=_(n);return o=t.isNumeric(e)&&e>0&&a.displayCount===!0?e:y},_=function(n){var o=n.attr(u),a="["+s+"="+o+"]",e=t(a).length;return e},j=function(n,t){n.add(t).hover(function(){t.stop(!0,!0).fadeIn()},function(){t.stop(!0,!0).fadeOut(2e3)})},A=function(n,t){t.on("click",function(o){o.preventDefault(),I(),n.addClass(f),J(),t.addClass(m),Q(t)})},I=function(){var n=t(d);0!==n.length&&(n.removeClass(f),0===n.prop("class").length&&n.removeAttr("class"))},Q=function(n){var o=t("<div/>",{"class":h}).appendTo(i).css("background-color",a.background);B(),q(),F(n,o),G(),H()},q=function(){t(r).appendTo(b).show(),z()},z=function(){var n=t("<input>").attr("type","hidden").attr("name",C).val(E);t(r+" .form-submit").append(t(n))},B=function(){var n="["+s+"="+E()+"]";t(k).hide(),t(k+n).show()},E=function(){var n=t(d).attr(u);return n},F=function(n,t){var o=n.offset();t.css({top:o.top,left:"right"===a.position?o.left+n.outerWidth():o.left-t.outerWidth()})},G=function(){t("html").click(function(n){0===t(n.target).parents(i).length&&J(!0)})},H=function(){t(w).click(function(n){n.preventDefault(),J(!0)})},J=function(n){var o=t(p),a=t(b);t(r).appendTo(i).hide(),o.hasClass(m)&&(o.removeClass(m),n===!0?a.fadeOut("fast",function(){t(this).remove()}):a.remove())},K=function(n){var t=n.split(",");return t}}(window.incom=window.incom||{},jQuery);
!function(t,n,o){var i,e="incom_wrapper",c="#"+e,a="body",r="comments-and-form",s="#"+r,u="data-incom",f=u+"-comment",l="incom-active",p="."+l,v="incom-position-",d="incom-bubble",m="."+d,h=d+"-style",b=d+"-static",g=d+"-active",w=d+"-link",k="incom-comments-wrapper",C="."+k,T="incom-cancel",S="."+T,y=s+" .comment",x="data_incom",B=100;t.init=function(t){D(t),N()};var D=function(t){i=n.extend({selectors:"p",moveSiteSelector:a,countStatic:!0,defaultBubbleText:"+",position:"left",background:"white"},t)},N=function(){0===n(c).length&&n('<div id="'+e+'"></div>').appendTo(n(a)).addClass(v+i.position),O()},O=function(){var t=nn(i.selectors);n(t).each(function(o){n(t[o]).each(function(t){var o=n(this);W(t,o),_(o)})})},W=function(t,n){var o=n.prop("tagName").substr(0,1);if(!n.attr(u)){var i=o+t;n.attr(u,i)}},_=function(t){var o=j(t),i=I(t),e=n("<a/>",{href:"","class":w}).text(o).wrap(i).parent().appendTo(c);z(e),P(t,e),E(t,e),F(t,e)},j=function(t){var n;return n=q(t)?A(t):i.defaultBubbleText},A=function(t){var o=t.attr(u),i="["+f+"="+o+"]",e=n(i).length;return e},I=function(t){var n='<div class="'+Q(t)+'" />';return n},Q=function(t){var n=d,o=" ";return q(t)&&i.countStatic?n+=o+h+o+b:q(t)&&(n+=o+h),n},q=function(t){var o=A(t);return n.isNumeric(o)&&o>0?!0:!1},z=function(t){t.hasClass(b)&&t.css("display","block")},E=function(t,n){n.hasClass(b)||t.add(n).hover(function(){n.stop(!0,!0).fadeIn()},function(){n.stop(!0,!0).fadeOut(2e3)})},F=function(t,n){n.on("click",function(o){o.preventDefault(),G(),t.addClass(l),V(),n.addClass(g),H(n)})},G=function(){var t=n(p);0!==t.length&&(t.removeClass(l),0===t.prop("class").length&&t.removeAttr("class"))},H=function(t){var o=n("<div/>",{"class":k}).appendTo(c).css("background-color",i.background);L(),J(),P(t,o),X("in"),R(),U()},J=function(){n(s).appendTo(C).show(),K()},K=function(){var t=n("<input>").attr("type","hidden").attr("name",x).val(M);n(s+" .form-submit").append(n(t))},L=function(){var t="["+f+"="+M()+"]";n(y).hide(),n(y+t).show()},M=function(){var t=n(p).attr(u);return t},P=function(t,n){var o=t.offset();n.css({top:o.top,left:"right"===i.position?o.left+t.outerWidth():o.left-n.outerWidth()})},R=function(){n("html").click(function(t){0===n(t.target).parents(c).length&&V(!0)})},U=function(){n(S).click(function(t){t.preventDefault(),V(!0)})},V=function(t){var o=n(m),i=n(C);n(s).appendTo(c).hide(),o.hasClass(g)&&(o.removeClass(g),t?i.fadeOut("fast",function(){n(this).remove()}):i.remove(),X("out"))},X=function(t){var o=n(i.moveSiteSelector),e;o.css({position:"relative"}),"in"===t?(Y(),$(),e=B,o.css("left"===i.position?{left:e}:{right:e})):"out"===t&&(Z(),tn(),e="initial",o.css("left"===i.position?{left:e}:{right:e}))},Y=function(){var t=n(".incom-bubble");t.css({left:"right"===i.position?"-="+B:"+="+B})},Z=function(){var t=n(".incom-bubble");t.css({left:"right"===i.position?"+="+B:"-="+B})},$=function(){var t=n(".incom-comments-wrapper");t.css({left:"right"===i.position?"-="+B:"+="+B})},tn=function(){var t=n(".incom-comments-wrapper");t.css({left:"right"===i.position?"+="+B:"-="+B})},nn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);